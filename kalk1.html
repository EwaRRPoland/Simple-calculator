<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Simple Calculator</title>
    <meta
      name="description"
      content="Prosty kalkulator matematyczny do szybkich obliczeń online. 
      Dodawanie, odejmowanie, mnożenie i dzielenie."
    />
    <style>
      /*ten kod CSS sprawia, że kalkulator będzie wyśrodkowany zarówno w pionie, jak i w poziomie na stronie.
      Marginesy domyślne dla elementu body muszą być ustawione na margin: 0*/
      body {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
        /* ustawia tło jako gradient od niebieskiego do zielonego */
        background: linear-gradient(
          to right,
          rgb(133, 133, 233),
          rgb(231, 130, 36)
        );
      }
      /*styl dla elementów HTML o klasie .button*/
      .button {
        /*ustawiają szerokość i wysokość przycisku na 50 pikseli*/
        width: 50px;
        height: 50px;
        /*ustawia rozmiar czcionki na 25 pikseli*/
        font-size: 25px;
        /* dodaje margines o szerokości 2 pikseli wokół przycisku*/
        margin: 2px;
        /*zmienia kursor na wskaźnik -ręka z wskazującym palcem- gdy użytkownik najedzie na przycisk*/
        cursor: pointer;
        /* zaokrągla rogi przycisków */
        border-radius: 10px;
        /* zmienia kolor tła przycisku na czerwony po najechaniu */
        transition: background-color 0.3s ease;
      }
      .button:hover {
        background-color: orange;
      }
      /*Ten fragment kodu CSS definiuje styl dla elementów HTML o klasie .textview*/
      .textview {
        /*ustawia szerokość elementu na 206 pikseli*/
        width: 206px;
        /*dodaje margines o szerokości 5 pikseli wokół elementu*/
        margin: 5px;
        /*ustawia rozmiar czcionki na 25 pikseli*/
        font-size: 25px;
        /*dodaje wewnętrzny margines, znanym jako padding, o szerokości 5 pikseli wokół zawartości elementu*/
        padding: 5px;
      }
    </style>
  </head>
  <body>
    <!--Tworzy kontener div z identyfikatorem calculator. Można go użyć do
    stylizacji lub manipulacji za pomocą CSS lub JavaScript-->
    <div id="calculator">
      <!--Tworzy pole wejściowe o klasie textview i identyfikatorze result. 
      To pole wejściowe może być używane do wyświetlania wyników obliczeń kalkulatora.-->
      <input class="textview" id="result" />
      <br />
      <!--Te znaczniki HTML tworzą przyciski, które są używane w interfejsie kalkulatora.Wszystkie w jednym wierszu.
      Funkcja insert dodaje wartość przekazaną jako argument do pola wejściowego kalkulatora.-->
      <button class="button" onclick="clean()">C</button>
      <button class="button" onclick="square()">x²</button>
      <button class="button" onclick="squareRoot()">√</button>
      <button class="button" onclick="percent()">%</button>
      <br />
      <!--Kolejny wiersz przycisków-->
      <button class="button" onclick="insert('7')">7</button>
      <button class="button" onclick="insert('8')">8</button>
      <button class="button" onclick="insert('9')">9</button>
      <button class="button" onclick="insert('/')">/</button>
      <br />
      <!--Kolejny wiersz przycisków-->
      <button class="button" onclick="insert('4')">4</button>
      <button class="button" onclick="insert('5')">5</button>
      <button class="button" onclick="insert('6')">6</button>
      <button class="button" onclick="insert('*')">*</button>
      <br />
      <!--Kolejny wiersz przycisków-->
      <button class="button" onclick="insert('1')">1</button>
      <button class="button" onclick="insert('2')">2</button>
      <button class="button" onclick="insert('3')">3</button>
      <button class="button" onclick="insert('-')">-</button>
      <br />
      <!--Kolejny wiersz przycisków-->
      <button class="button" onclick="insert('0')">0</button>
      <button class="button" onclick="insert('.')">.</button>
      <button class="button" onclick="equal('=')">=</button>
      <button class="button" onclick="insert('+')">+</button>
    </div>
    <script type="text/javascript">
      //Sprawdza, czy zmienna justCalculated jest ustawiona na true, co oznacza,
      //że właśnie obliczono wynik. Jeśli tak, to funkcja clean() jest wywoływana, aby wyczyścić ekran,
      //a justCalculated jest ustawiane na false.
      //Pobiera bieżące wyrażenie z ekranu kalkulatora.
      //Jeśli dodawany numer to przecinek (czyli .), funkcja sprawdza,
      //czy przecinek jest już obecny w bieżącym wyrażeniu liczbowym. Jeśli tak,
      //funkcja zwraca kontrolę i nie dodaje kolejnego przecinka.
      //Dodaje numer do bieżącego wyrażenia na ekranie kalkulatora.
      //W ten sposób, funkcja insert() pozwala na wprowadzanie liczb
      //i operatorów do kalkulatora, jednocześnie zapewniając,
      //że po obliczeniu wyniku, ekran jest czyszczony przed dodaniem nowego numeru.
      //To zapobiega dopisywaniu do wyniku po jego obliczeniu.
      var justCalculated = false;
      function insert(num) {
        if (justCalculated) {
          clean();
          justCalculated = false;
        }
        var currentExpression = document.getElementById("result").value;
        if (num == ".") {
          // Sprawdź, czy przecinek jest już obecny w bieżącym wyrażeniu liczbowym
          var lastNumber = currentExpression.split(/[\+\-\*\/]/).pop();
          if (lastNumber.includes(".")) {
            return;
            // Jeśli num to przecinek i już istnieje przecinek, nie dodawaj kolejnego
          }
        }
        document.getElementById("result").value = currentExpression + num;
      }
      //oblicza wynik wyrażenia matematycznego
      function equal() {
        var exp = document.getElementById("result").value;
        if (exp) {
          var result = eval(exp);
          // Sprawdź, czy wynik jest liczbą całkowitą
          if (Number.isInteger(result)) {
            document.getElementById("result").value = result;
          } else {
            // Jeśli wynik jest ułamkiem, zaokrąglij do 8 miejsca po przecinku
            document.getElementById("result").value = result.toFixed(8);
          }
          justCalculated = true;
        }
      }
      //czyści wyświetlacz
      function clean() {
        document.getElementById("result").value = "";
      }
      //oblicza pierwiastek kwadratowy liczby
      function squareRoot() {
        var exp = document.getElementById("result").value;
        if (exp) {
          document.getElementById("result").value = Math.sqrt(eval(exp));
          justCalculated = true;
        }
      }
      //podnosi liczbę do kwadratu
      function square() {
        var exp = document.getElementById("result").value;
        if (exp) {
          document.getElementById("result").value = Math.pow(eval(exp), 2);
          justCalculated = true;
        }
      }
      //oblicza procent liczby
      function percent() {
        var exp = document.getElementById("result").value;
        if (exp) {
          document.getElementById("result").value = eval(exp) / 100;
          justCalculated = true;
        }
      }
    </script>
  </body>
</html>
